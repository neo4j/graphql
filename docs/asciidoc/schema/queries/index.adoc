[[schema-queries]]
= Queries


== Schema

[source, graphql]
----
type Post {
    id: ID! @id(autogenerate: true)
    content: String!
    creator: User @relationship(type: "HAS_POST", direction: IN)
}

type User {
    id: ID! @id(autogenerate: true)
    name: String
    posts: [Post] @relationship(type: "HAS_POST", direction: OUT)
}
----

== Get all users with id and name

[source, graphql]
----
query {
    users {
        id
        name
    }
}
----

== Get all users using the OGM

[source, javascript]
----
const User = ogm.model("User");

const users = await User.find();
----

== Get all users with all there posts

[source, graphql]
----
query {
    users {
        posts {
            content
        }
    }
}
----

== Read relationships with OGM
See <<ogm>>

[source, javascript]
----
const User = ogm.model("User");

const selectionSet = `
    {
        posts {
            content
        }
    }
`;

const users = await User.find({
    selectionSet,
});
----


== Filtering

> Checkout [TCK](https://github.com/neo4j/graphql/blob/master/packages/graphql/tests/tck/tck-test-files/cypher-advanced-filtering.md) for more advanced querying.

Use the `where` argument;

[source, graphql]
----
query {
    users(where: { id: "123" }) {
        id
        name
    }
}
----

== Filtering Relationships

Use the `where` argument, on the field;

[source, graphql]
----
query {
    users {
        id
        name
        posts(where: { id: "123" }) {
            content
        }
    }
}
----

== Sorting

Sort using the `options` argument;

[source, graphql]
----
query {
    users(options: { sort: { createdAt: DESC } }) {
        id
        name
        createdAt
    }
}
----

== Sorting Relationships

Sort using the `options` argument, on the field;

[source, graphql]
----
query {
    users {
        id
        name
        posts(options: { sort: { createdAt: DESC } }) {
            content
        }
    }
}
----


== Limiting

Limit using the `options` argument;

[source, graphql]
----
query {
    users(options: { limit: 10 }) {
        id
        name
        createdAt
    }
}
----

== Limiting Relationships

Limit using the `options` argument, on the field;

[source, graphql]
----
query {
    users {
        id
        name
        posts(options: { limit: 10 }) {
            content
        }
    }
}
----

== Skipping

Limit using the `options` argument;

[source, graphql]
----
query {
    users(options: { skip: 10 }) {
        id
        name
        createdAt
    }
}
----

== Skipping Relationships

Limit using the `options` argument, on the field;

[source, graphql]
----
query {
    users {
        id
        name
        posts(options: { skip: 10 }) {
            content
        }
    }
}
----
