[[operations-update]]
= Update

== Schema

[source, graphql]
----
type Post {
    id: ID! @autogenerated
    content: String!
    creator: User @relationship(type: "HAS_POST", direction: "IN")
}

type User {
    id: ID! @autogenerate
    name: String
    posts: [Post] @relationship(type: "HAS_POST", direction: "OUT")
}
----


== Updating a User

[source, graphql]
----
mutation {
    updateUsers(where: { name: "bob" }, update: { name: "Bob" }) {
        users {
            name
        }
    }
}
----


== Updating with OGM

See <<ogm>>.

[source, javascript]
----
const User = ogm.model("User");

const { users } = await User.update({
    where: { name: "bob" },
    update: { name: "Bob" },
});
----

== Creating a post and connecting it to user

[source, graphql]
----
mutation {
    updateUsers(
        where: { name: "bob" }
        create: { posts: [{ content: "nested mutations are cool" }] }
    ) {
        users {
            id
            name
        }
    }
}
----

== Connecting a post to a user

[source, graphql]
----
mutation {
    updateUsers(
        where: { name: "bob" }
        connect: { posts: { where: { content: "nested mutations are cool" } } }
    ) {
        users {
            id
            name
        }
    }
}
----

== Disconnecting a post from a user

[source, graphql]
----
mutation {
    updateUsers(
        where: { name: "bob" }
        disconnect: { posts: { where: { content: "nested mutations are cool" } } }
    ) {
        users {
            id
            name
        }
    }
}
----
