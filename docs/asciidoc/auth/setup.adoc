[[auth-setup]]
= Setup

The auth implementation uses JWT tokens. You are expected to pass a JWT into the request. The accepted token type should be Bearer where the header should be authorization;

[source]
----
POST / HTTP/1.1
authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyLCJyb2xlcyI6WyJ1c2VyX2FkbWluIiwicG9zdF9hZG1pbiIsImdyb3VwX2FkbWluIl19.IY0LWqgHcjEtOsOw60mqKazhuRFKroSXFQkpCtWpgQI
content-type: application/json
----

== Environment Variables

.Auth Environment Variables Matrix
|===
|Variable | Usage

|`JWT_SECRET`
| Specify JWT secret

|`JWT_NO_VERIFY`
| Disable the verification of the JW

|`JWT_ROLES_OBJECT_PATH`
| Specify where on the JWT the roles key is
|===

== Server Construction
Request object needs to be injected into the context before you can use auth. Here is an example using Apollo Sever;

[source, javascript]
----
const neoSchema = new Neo4jGraphQL({});

const server = new ApolloServer({
    schema: neoSchema.schema,
    context: ({ req }) => ({ req }),
});
----