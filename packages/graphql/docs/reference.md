# Reference

This is the reference documentation for @neo4j/graphql. It covers the programming model, APIs, concepts, annotations and technical details of the library.

This document is split into zones;

1. Setup - Importable functions and classes & how to setup schema
2. Schema - How to define your GraphQL Schema
3. Querying - How to Query your data

## Setup

Importable functions and classes & how to setup schema

### makeAugmentedSchema

Main Entry to the library. Use to construct an instance of `NeoSchema`.

```js
const { makeAugmentedSchema } = require("@neo4j/graphql");

const neoSchema = makeAugmentedSchema({
    typeDefs,
    resolvers?,
    schemaDirectives?,
    debug?,
});
```

### NeoSchema

Core class of the library. Holds all metadata about schema plus access to the OGM.

#### With Apollo Server

```js
const neo4j = require("neo4j-driver");
const { makeAugmentedSchema } = require("@neo4j/graphql");
const { ApolloServer } = require("apollo-server");

const neoSchema = makeAugmentedSchema({
    typeDefs,
    resolvers?,
    context?,
    schemaDirectives?,
    debug?,
});

const driver = neo4j.driver(
    config.NEO_URL,
    neo4j.auth.basic("admin", "password")
);

const apolloServer = new ApolloServer({
    schema: neoSchema.schema,
    context: { driver }
});
```

#### With OGM

```js
const neo4j = require("neo4j-driver");
const { makeAugmentedSchema } = require("@neo4j/graphql");

const driver = neo4j.driver(
    config.NEO_URL,
    neo4j.auth.basic("admin", "password")
);


const neoSchema = makeAugmentedSchema({
    typeDefs,
    resolvers?,
    schemaDirectives?,
    debug?,
});

const Model = neoSchema.model("MODEL_NAME_HERE");

// await Model.find();
// await Model.create();
// await Model.update();
// await Model.delete();
```

### translate

Used to translate the `resolveInfo` object of a custom resolver into cypher and params. Only to be used on custom/overridden resolvers. Using this function can act as both a pre and post mechanism for your resolvers.

```js
const { makeAugmentedSchema, translate } = require("@neo4j/neo4j-graphql");

const typeDefs = `
    type User {
        name: String
    }
`;

const resolvers = {
    Query: {
        Users: (root, args, context, resolveInfo) => {
            // pre
            const [cypher, params] = translate({
                context,
                resolveInfo,
            });
            // post
        },
    },
};

const neoSchema = makeAugmentedSchema({ typeDefs, resolvers });
```

## Schema

### Nodes

To represent a node in the GraphQL schema use the `type` definition;

```graphql
type Node {
    id: ID
}
```

### Relationships

To represent a relationship between two nodes use the `@relationship` directive.

_Usage_

```graphql
type Node {
    id: ID
    related: [Node] @relationship(type: "RELATED", direction: "OUT")
}
```

_Definition_

> You do not need to define this. It is for documentation purposes only.

```graphql
directive @relationship(type: String!, direction: String) on FIELD
```

3. @auth
4. DateTime @timestamps
5. @autogenerated
6. @readonly

## Querying

1. Finding
2. Creating
3. Updating
4. Deleting
